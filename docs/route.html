<!DOCTYPE html>  <html> <head>   <title>route.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="abstract.html">                 abstract.js               </a>                                           <a class="source" href="base.html">                 base.js               </a>                                           <a class="source" href="abstract.html">                 abstract.js               </a>                                           <a class="source" href="mongoose.html">                 mongoose.js               </a>                                           <a class="source" href="base-route.html">                 base-route.js               </a>                                           <a class="source" href="route.html">                 route.js               </a>                                           <a class="source" href="url-express-crud.html">                 url-express-crud.js               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               route.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">MongooseResourceProvider</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../providers/mongoose&#39;</span><span class="p">).</span><span class="nx">MongooseResourceProvider</span>
  <span class="p">,</span> <span class="nx">BaseResourceController</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../controllers/base&#39;</span><span class="p">).</span><span class="nx">BaseResourceController</span>
  <span class="p">,</span> <span class="nx">BaseRoute</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./base-route&#39;</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>REST request verbs dictionary</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="p">,</span> <span class="nx">VERBS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">GET</span><span class="o">:</span> <span class="s1">&#39;get&#39;</span>
    <span class="p">,</span> <span class="nx">PUT</span><span class="o">:</span> <span class="s1">&#39;put&#39;</span>
    <span class="p">,</span> <span class="nx">POST</span><span class="o">:</span> <span class="s1">&#39;post&#39;</span>
    <span class="p">,</span> <span class="nx">DELETE</span><span class="o">:</span> <span class="s1">&#39;del&#39;</span>
  <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>CRUDRouter class.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Example:</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>var crudRouter = new CRUDRouter({</p>

<pre><code>app: app,
Model: mongoose.model('SomeModel')
</code></pre>

<p>});</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>crudRouter.list = function(req, res, next) {</p>

<pre><code>...
// provide custom routes function implementation ...
// collections are stored in the &lt;req.locals&gt;. Example:
// res.render('custom_template', {
//      items: req.locals.items
// });
</code></pre>

<p>};</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>The routes that this Router class introduces to provided application instance by default are:</p>

<pre><code>app.get('/items/', routes.index)

app.get('/items/form/', csrf, routes.form)

app.get('/items/form/:slug', csrf, routes.form)

app.post('/items/', routes.create)

app.put('/items/', csrf, routes.update)

app.get('/items/:slug', routes.read)

app.put('/items/:slug', csrf, routes.update)

app.get('/items/:slug/delete', routes.delete)
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>In order to override default routes you can provide your own implementation of controller
with the custom implementation of the function you want to override!</p>

<p>var customController = new BaseResourceController({</p>

<pre><code>resourceProvider: new MongooseResourceProvider({
    Model: config.Model
})
, resourceRequestParamName: 'item'
</code></pre>

<p>});</p>

<p>var CustomController = Object.create(customController);</p>

<p>CustomController.list = function() {</p>

<pre><code>// ... custom route function code
</code></pre>

<p>};</p>

<p>var crudRouter = new crud.CRUDRouter({</p>

<p>app: app</p>

<p>, Model: Item</p>

<p>// Now default list action will be overrided by your custom one</p>

<p>, controller: CustomController</p>

<p>});</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>@param config - JSON configuration</p>

<p>{</p>

<p>// REQUIRED! express application instance</p>

<p>app: null</p>

<p>// REQUIRED! model class to be used by the library</p>

<p>Model: null</p>

<p>// configured controller instance to be used. Defaults to <MongooseResourceController></p>

<p>, controller: null</p>

<p>// JSON object representing a routes configuration for the component</p>

<p>// Each entry object's key represents an internal name for the action it represents (list/details/create...)</p>

<p>// Each entry object's value consists of an array of 2 arguments:</p>

<p>// * 1st argument - corresponds to request method type [GET/POST/...]</p>

<p>// * 2nd argument - is an array of arguments that correspond to the arguments compatible with app.get(...), app.put(...), app.del(...), ... [e.g. app.get(uri, [middleware functions], routeCallbackFunction);]</p>

<p>, routes: {</p>

<pre><code>list: ['get', ['/items/', customListRoute]]
, details: []
, update: []
, create: []
, delete: []
, createForm: []
, updateForm: []
</code></pre>

<p>}</p>

<p>// Base uri that will be used for resources routes (defaults to 'object')</p>

<p>, routeBaseUri: 'object'</p>

<p>// Templates configuration</p>

<p>, templates: {</p>

<pre><code>// Custom list template path
list: 'list'
// Custom form template path (used for update/create)
, form: 'form'
// Custom details template path
, details: 'details'
</code></pre>

<p>}</p>

<p>// Context varible key value, which will be used for the resource retrieval within the templates (details/form templates)
// Defaults to 'object'</p>

<p>, resourceRequestParamName: 'item'</p>

<p>// Context varible key value, which will be used for the resource list retrieval within the template (list template)
// Defaults to 'objects'</p>

<p>, resourceRequestParamNamePlural: 'items'</p>

<p>}</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">CRUDRouter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">crudrouter</span> <span class="o">=</span> <span class="k">this</span>
    <span class="p">,</span> <span class="nx">_routes</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Assert REQUIRED</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">config</span><span class="p">.</span><span class="nx">app</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;ERROR: CRUDRouter(configuration): Constructor requires &lt;configuration.app&gt; to be set. Provided configuration: &#39;</span><span class="p">,</span> <span class="nx">config</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">app</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">app</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">config</span><span class="p">.</span><span class="nx">Model</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;ERROR: CRUDRouter(configuration): Constructor requires &lt;configuration.Model&gt; to be set. Provided configuration: &#39;</span><span class="p">,</span> <span class="nx">config</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">Model</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">Model</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Ensure that appropriate resourceRequiredParamName(Plural) config parameters are set to customly provided controller</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">if</span> <span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">controller</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">config</span><span class="p">.</span><span class="nx">controller</span><span class="p">.</span><span class="nx">resourceRequestParamName</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">resourceRequestParamName</span> <span class="o">?</span> <span class="nx">config</span><span class="p">.</span><span class="nx">resourceRequestParamName</span> <span class="o">:</span> <span class="s1">&#39;object&#39;</span><span class="p">;</span>
    <span class="nx">config</span><span class="p">.</span><span class="nx">controller</span><span class="p">.</span><span class="nx">resourceRequestParamNamePlural</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">resourceRequestParamNamePlural</span> <span class="o">?</span> <span class="nx">config</span><span class="p">.</span><span class="nx">resourceRequestParamNamePlural</span> <span class="o">:</span> <span class="s1">&#39;objects&#39;</span><span class="p">;</span>
  <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>Set controller to customly configured controller or default controller</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">controller</span> <span class="o">||</span> <span class="k">new</span> <span class="nx">BaseResourceController</span><span class="p">({</span>
      <span class="nx">resourceProvider</span><span class="o">:</span> <span class="k">new</span> <span class="nx">MongooseResourceProvider</span><span class="p">({</span>
        <span class="nx">Model</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">Model</span>
      <span class="p">})</span>
      <span class="p">,</span> <span class="nx">resourceRequestParamName</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">resourceRequestParamName</span> <span class="o">||</span> <span class="s1">&#39;object&#39;</span>
      <span class="p">,</span> <span class="nx">resourceRequestParamNamePlural</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">resourceRequestParamNamePlural</span> <span class="o">||</span> <span class="s1">&#39;objects&#39;</span>
    <span class="p">});</span>

  <span class="nx">_routes</span> <span class="o">=</span> <span class="nx">BaseRoute</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">controller</span><span class="o">:</span> <span class="nx">controller</span>
  <span class="p">});</span>

  <span class="kd">var</span> <span class="nx">constructFilePath</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">rootPath</span><span class="p">,</span> <span class="nx">fileName</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">?</span> <span class="p">[</span><span class="nx">rootPath</span> <span class="o">+</span> <span class="nx">fileName</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">:</span> <span class="nx">fileName</span><span class="p">;</span>
  <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Set templates</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">templates</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">templates</span> <span class="o">||</span> <span class="p">{};</span>
  <span class="kd">var</span> <span class="nx">templates</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">rootDir</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">templates</span> <span class="o">&amp;&amp;</span> <span class="nx">config</span><span class="p">.</span><span class="nx">templates</span><span class="p">.</span><span class="nx">rootDir</span> <span class="o">?</span> <span class="nx">config</span><span class="p">.</span><span class="nx">templates</span><span class="p">.</span><span class="nx">rootDir</span> <span class="o">:</span> <span class="s1">&#39;object/&#39;</span>
    <span class="p">,</span> <span class="nx">list</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">templates</span> <span class="o">&amp;&amp;</span> <span class="nx">config</span><span class="p">.</span><span class="nx">templates</span><span class="p">.</span><span class="nx">list</span> <span class="o">?</span> <span class="nx">config</span><span class="p">.</span><span class="nx">templates</span><span class="p">.</span><span class="nx">list</span> <span class="o">:</span> <span class="s1">&#39;list&#39;</span>
    <span class="p">,</span> <span class="nx">form</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">templates</span> <span class="o">&amp;&amp;</span> <span class="nx">config</span><span class="p">.</span><span class="nx">templates</span><span class="p">.</span><span class="nx">form</span> <span class="o">?</span> <span class="nx">config</span><span class="p">.</span><span class="nx">templates</span><span class="p">.</span><span class="nx">form</span> <span class="o">:</span> <span class="s1">&#39;form&#39;</span>
    <span class="p">,</span> <span class="nx">details</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">templates</span> <span class="o">&amp;&amp;</span> <span class="nx">config</span><span class="p">.</span><span class="nx">templates</span><span class="p">.</span><span class="nx">details</span> <span class="o">?</span> <span class="nx">config</span><span class="p">.</span><span class="nx">templates</span><span class="p">.</span><span class="nx">details</span> <span class="o">:</span> <span class="s1">&#39;details&#39;</span>
  <span class="p">};</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">templates</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">rootDir</span><span class="o">:</span> <span class="nx">templates</span><span class="p">.</span><span class="nx">rootDir</span>
    <span class="p">,</span> <span class="nx">list</span><span class="o">:</span> <span class="nx">constructFilePath</span><span class="p">(</span><span class="nx">templates</span><span class="p">.</span><span class="nx">rootDir</span><span class="p">,</span> <span class="nx">templates</span><span class="p">.</span><span class="nx">list</span><span class="p">)</span>
    <span class="p">,</span> <span class="nx">form</span><span class="o">:</span> <span class="nx">constructFilePath</span><span class="p">(</span><span class="nx">templates</span><span class="p">.</span><span class="nx">rootDir</span><span class="p">,</span> <span class="nx">templates</span><span class="p">.</span><span class="nx">form</span><span class="p">)</span>
    <span class="p">,</span> <span class="nx">details</span><span class="o">:</span> <span class="nx">constructFilePath</span><span class="p">(</span><span class="nx">templates</span><span class="p">.</span><span class="nx">rootDir</span><span class="p">,</span> <span class="nx">templates</span><span class="p">.</span><span class="nx">details</span><span class="p">)</span>
  <span class="p">};</span>
    </pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Set route base uri</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">routeBaseUri</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">routeBaseUri</span> <span class="o">||</span> <span class="s1">&#39;/objects/&#39;</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Set routes to customly provided routes or default ones</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">routes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">list</span><span class="o">:</span> <span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">routes</span> <span class="o">&amp;&amp;</span> <span class="nx">config</span><span class="p">.</span><span class="nx">routes</span><span class="p">.</span><span class="nx">list</span><span class="p">)</span> <span class="o">?</span> <span class="nx">config</span><span class="p">.</span><span class="nx">routes</span><span class="p">.</span><span class="nx">list</span> <span class="o">:</span> <span class="p">[</span><span class="nx">VERBS</span><span class="p">.</span><span class="nx">GET</span><span class="p">,</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">routeBaseUri</span><span class="p">,</span> <span class="nx">_routes</span><span class="p">.</span><span class="nx">list</span><span class="p">]]</span>
    <span class="p">,</span> <span class="nx">createForm</span><span class="o">:</span> <span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">routes</span> <span class="o">&amp;&amp;</span> <span class="nx">config</span><span class="p">.</span><span class="nx">routes</span><span class="p">.</span><span class="nx">createForm</span><span class="p">)</span> <span class="o">?</span> <span class="nx">config</span><span class="p">.</span><span class="nx">routes</span><span class="p">.</span><span class="nx">createForm</span> <span class="o">:</span> <span class="p">[</span><span class="nx">VERBS</span><span class="p">.</span><span class="nx">GET</span><span class="p">,</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">routeBaseUri</span><span class="o">+</span><span class="s1">&#39;form/&#39;</span><span class="p">,</span>  <span class="nx">_routes</span><span class="p">.</span><span class="nx">form</span><span class="p">]]</span>
    <span class="p">,</span> <span class="nx">updateForm</span><span class="o">:</span> <span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">routes</span> <span class="o">&amp;&amp;</span> <span class="nx">config</span><span class="p">.</span><span class="nx">routes</span><span class="p">.</span><span class="nx">updateForm</span><span class="p">)</span> <span class="o">?</span> <span class="nx">config</span><span class="p">.</span><span class="nx">routes</span><span class="p">.</span><span class="nx">updateForm</span><span class="o">:</span> <span class="p">[</span><span class="nx">VERBS</span><span class="p">.</span><span class="nx">GET</span><span class="p">,</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">routeBaseUri</span><span class="o">+</span><span class="s1">&#39;form/:slug&#39;</span><span class="p">,</span> <span class="nx">_routes</span><span class="p">.</span><span class="nx">form</span><span class="p">]]</span>
    <span class="p">,</span> <span class="nx">details</span><span class="o">:</span> <span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">routes</span> <span class="o">&amp;&amp;</span> <span class="nx">config</span><span class="p">.</span><span class="nx">routes</span><span class="p">.</span><span class="nx">details</span><span class="p">)</span> <span class="o">?</span> <span class="nx">config</span><span class="p">.</span><span class="nx">routes</span><span class="p">.</span><span class="nx">details</span> <span class="o">:</span> <span class="p">[</span><span class="nx">VERBS</span><span class="p">.</span><span class="nx">GET</span><span class="p">,</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">routeBaseUri</span><span class="o">+</span><span class="s1">&#39;:slug&#39;</span><span class="p">,</span> <span class="nx">_routes</span><span class="p">.</span><span class="nx">details</span><span class="p">]]</span>
    <span class="p">,</span> <span class="nx">update</span><span class="o">:</span> <span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">routes</span> <span class="o">&amp;&amp;</span> <span class="nx">config</span><span class="p">.</span><span class="nx">routes</span><span class="p">.</span><span class="nx">update</span><span class="p">)</span> <span class="o">?</span> <span class="nx">config</span><span class="p">.</span><span class="nx">routes</span><span class="p">.</span><span class="nx">update</span> <span class="o">:</span> <span class="p">[</span><span class="nx">VERBS</span><span class="p">.</span><span class="nx">PUT</span><span class="p">,</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">routeBaseUri</span><span class="p">,</span> <span class="nx">_routes</span><span class="p">.</span><span class="nx">update</span><span class="p">]]</span>
    <span class="p">,</span> <span class="nx">create</span><span class="o">:</span> <span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">routes</span> <span class="o">&amp;&amp;</span> <span class="nx">config</span><span class="p">.</span><span class="nx">routes</span><span class="p">.</span><span class="nx">create</span><span class="p">)</span> <span class="o">?</span> <span class="nx">config</span><span class="p">.</span><span class="nx">routes</span><span class="p">.</span><span class="nx">create</span> <span class="o">:</span> <span class="p">[</span><span class="nx">VERBS</span><span class="p">.</span><span class="nx">POST</span><span class="p">,</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">routeBaseUri</span><span class="p">,</span> <span class="nx">_routes</span><span class="p">.</span><span class="nx">create</span><span class="p">]]</span>
    <span class="p">,</span> <span class="k">delete</span><span class="o">:</span> <span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">routes</span> <span class="o">&amp;&amp;</span> <span class="nx">config</span><span class="p">.</span><span class="nx">routes</span><span class="p">.</span><span class="k">delete</span><span class="p">)</span> <span class="o">?</span> <span class="nx">config</span><span class="p">.</span><span class="nx">routes</span><span class="p">.</span><span class="k">delete</span> <span class="o">:</span> <span class="p">[</span><span class="nx">VERBS</span><span class="p">.</span><span class="nx">GET</span><span class="p">,</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">routeBaseUri</span><span class="o">+</span><span class="s1">&#39;:slug/delete&#39;</span><span class="p">,</span> <span class="nx">_routes</span><span class="p">.</span><span class="k">delete</span><span class="p">]]</span>
  <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Register routes (custom or default ones)</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">mapRoutes</span><span class="p">();</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Maps the <routes> property into application routes.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">CRUDRouter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">mapRoutes</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span> <span class="nx">verb</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">routeConfiguration</span><span class="p">,</span> <span class="nx">r_args</span><span class="p">;</span>

  <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">routes</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">routeKey</span><span class="p">,</span> <span class="nx">routeConfiguratio</span><span class="p">,</span> <span class="nx">routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">routeConfiguration</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">routes</span><span class="p">[</span><span class="nx">routeKey</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">routeConfiguration</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">verb</span> <span class="o">=</span> <span class="nx">routeConfiguration</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
      <span class="nx">args</span> <span class="o">=</span> <span class="nx">routeConfiguration</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="nx">r_args</span> <span class="o">=</span> <span class="p">[</span><span class="nx">verb</span><span class="p">].</span><span class="nx">concat</span><span class="p">([].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">args</span><span class="p">));</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">_router</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">_router</span><span class="p">,</span> <span class="nx">r_args</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">};</span>


<span class="nx">exports</span><span class="p">.</span><span class="nx">CRUDRouter</span> <span class="o">=</span> <span class="nx">CRUDRouter</span><span class="p">;</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 